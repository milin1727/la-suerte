<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>La Suerte - Números de Lotería</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <style>
    * { box-sizing: border-box; }
    body { font-family: sans-serif; margin:0; padding:1rem; background:#f9f9f9; text-align:center; }
    h1 { color:#b30000; font-size:1.5rem; margin-bottom:1rem; }
    .navbar { background-color:#222; padding:10px 0; }
    .navbar ul { list-style:none; padding:0; margin:0; display:flex; flex-wrap:wrap; justify-content:center; }
    .navbar ul li { margin:10px; }
    .navbar ul li a { text-decoration:none; color:white; font-weight:bold; transition: color 0.3s; }
    .navbar ul li a:hover { color:#ffcc00; }
    .input-group { display:flex; justify-content:center; flex-wrap:wrap; gap:10px; margin-bottom:1rem; }
    input[type="number"] { width:60px; font-size:1.2rem; text-align:center; }
    button { padding:0.8rem 1.5rem; font-size:1rem; background:#b30000; color:white; border:none; cursor:pointer; margin-top:10px; }
    .result { margin-top:2rem; font-size:1.3rem; font-weight:bold; }
    section, p { padding:0 1rem; }
    #historial { margin-top:2rem; text-align:left; max-width:600px; margin-left:auto; margin-right:auto; }
    @media (max-width:600px) { h1{font-size:1.3rem;} input[type="number"]{width:50px;font-size:1rem;} button{width:100%;} .navbar ul{flex-direction:column; gap:5px;} }
  </style>
</head>
<body>

<header>
  <nav class="navbar">
    <ul>
      <li><a href="index.html">Inicio</a></li>
      <li><a href="#como-funciona">Cómo funciona</a></li>
      <li><a href="contacto.html">Contacto</a></li>
      <li><a href="privacidad.html">Privacidad</a></li>
      <li><a href="terminos.html">Términos</a></li>
    </ul>
  </nav>
</header>

<h1>Coloca aquí los números que salieron ayer</h1>

<div class="input-group">
  <input type="number" id="n1" min="0" max="99" required>
  <input type="number" id="n2" min="0" max="99" required>
  <input type="number" id="n3" min="0" max="99" required>
  <input type="number" id="n4" min="0" max="99" required>
</div>

<button id="btnCalcular" disabled>Calcular Palés y Combinaciones</button>

<div class="result" id="resultadoFinal"></div>

<div style="margin-top: 2rem;">
  <button onclick="compartir()">Compartir por WhatsApp</button>
</div>

<div id="historial"></div>

<h2 style="text-align: center;">Bienvenido a La Suerte</h2>
<div style="max-width:700px; margin:auto; font-size:16px; line-height:1.6; text-align:justify;">
  <p><strong>La Suerte</strong> genera combinaciones de números para jugar la lotería basadas en los resultados del día anterior.</p>
  <p>Este sitio es solo informativo y recreativo. Juega con responsabilidad.</p>
</div>

<section id="como-funciona" style="padding:40px 20px; background-color:#f9f9f9;">
  <h2 style="text-align:center;">¿Cómo funciona?</h2>
  <div style="max-width:700px; margin:auto; font-size:16px; line-height:1.6; text-align:justify;">
    <p>La herramienta utiliza la fecha actual y los premios ingresados para generar:</p>
    <ul>
      <li>Palés basados en la fecha.</li>
      <li>Combinaciones basadas en sumatoria vectorial de los premios.</li>
    </ul>
  </div>
</section>

<footer style="text-align:center; margin-top:2em; font-size:0.9em;">
  <a href="privacidad.html">Política de Privacidad</a> |
  <a href="terminos.html">Términos y Condiciones</a> |
  <a href="contacto.html">Contacto</a>
</footer>

<script>
function compartir() {
  const combinaciones = document.getElementById('resultadoFinal').innerText;
  const url = encodeURIComponent(window.location.href);
  const mensaje = encodeURIComponent(`Mira estas combinaciones de lotería:\n\n${combinaciones}\n\n${url}`);
  window.open(`https://wa.me/?text=${mensaje}`, '_blank');
}

function guardarHistorial(combinaciones) {
  let historial = JSON.parse(localStorage.getItem('historial')) || [];
  historial.unshift({ fecha: new Date().toLocaleDateString(), datos: combinaciones });
  localStorage.setItem('historial', JSON.stringify(historial));
  mostrarHistorial();
}

function mostrarHistorial() {
  const historial = JSON.parse(localStorage.getItem('historial')) || [];
  const contenedor = document.getElementById('historial');
  if (!contenedor) return;
  contenedor.innerHTML = "<h3>Historial</h3>";
  historial.slice(0,5).forEach(item => {
    contenedor.innerHTML += `<p><strong>${item.fecha}:</strong> ${item.datos}</p>`;
  });
}

document.addEventListener("DOMContentLoaded", () => {
  mostrarHistorial();
  const campos = [document.getElementById('n1'), document.getElementById('n2'), document.getElementById('n3'), document.getElementById('n4')];
  const btnCalcular = document.getElementById('btnCalcular');
  function validarCampos() {
    btnCalcular.disabled = campos.some(c => c.value.trim()==='' || isNaN(c.value) || Number(c.value)<0 || Number(c.value)>99);
  }
  campos.forEach(c=>c.addEventListener('input', validarCampos));
  btnCalcular.addEventListener('click', ()=>{ if(!btnCalcular.disabled) calcularTodo(); });
});

// Tabla de equivalencia
function equivalencia(d) {
  switch(d) { case 0: return 5; case 1: return 6; case 2: return 7; case 3: return 8; case 4: return 9; default: return d; }
}

// Suma vectorial para combinaciones de premios
function sumatoriaVectorial(fila) {
  const nueva = [];
  for(let i=0;i<fila.length-1;i++) nueva.push((fila[i]+fila[i+1])%10);
  return nueva;
}

// Función principal que genera ambos resultados
function calcularTodo() {
  const n1 = Number(document.getElementById('n1').value);
  const n2 = Number(document.getElementById('n2').value);
  const n3 = Number(document.getElementById('n3').value);
  const n4 = Number(document.getElementById('n4').value);
  const premios = [n1,n2,n3,n4];

  // --- Palés usando fecha ---
  const dia = new Date().getDate();
  const fila2 = [dia,dia,dia,dia];
  const pales = fila2.map(v=>{
    const dec=Math.floor(v/10);
    const uni=v%10;
    return `${equivalencia(dec)}${equivalencia(uni)}`;
  });
  const pares = [];
  for(let i=0;i<pales.length;i+=2) pares.push(`${pales[i]}-${pales[i+1]}`);

  // --- Combinaciones basadas en premios ---
  const fila1 = premios.flatMap(n=>n.toString().padStart(2,'0').split('').map(Number));
  let fila = fila1;
  const filas = [fila1];
  for(let i=0;i<6;i++){ fila=sumatoriaVectorial(fila); filas.push(fila); }
  const fila7=filas[6], fila8=sumatoriaVectorial(fila7);
  const fila9=fila7.map(d=>(d+fila8[0])%10);
  const fila10=sumatoriaVectorial(fila9);
  const sugerencias = [...fila9,...fila10];
  const combinaciones=[];
  for(let i=0;i<sugerencias.length;i++){
    for(let j=i+1;j<sugerencias.length;j++){
      combinaciones.push(`${sugerencias[i]}${sugerencias[j]}`);
    }
  }

  document.getElementById('resultadoFinal').innerHTML = `
    <strong>Palés (fecha):</strong> <br>${pares.join(', ')}<br><br>
    <strong>Combinaciones (premios):</strong> <br>${combinaciones.join(', ')}
  `;

  guardarHistorial(`Palés: ${pares.join(', ')} | Combinaciones: ${combinaciones.slice(0,10).join(', ')}...`);
}
</script>

</body>
</html>
